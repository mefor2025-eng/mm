<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Login | WASE</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="assets/style.css">
<script src="assets/app.js"></script>
</head>
<body>

<header>Login</header>

<div class="grid" style="max-width:420px;margin:auto">
  <input id="phone" placeholder="Phone number" inputmode="numeric">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Login</button>

  <p style="text-align:center">
    New user?
    <a href="signup.html">Create account</a>
  </p>
</div>

<script>
function login(){
  const phone = phone.value.trim();
  const password = password.value.trim();
  if(!phone || !password){
    alert("All fields required");
    return;
  }

  fetch(API + `?action=login&phone=${encodeURIComponent(phone)}&password=${encodeURIComponent(password)}`)
    .then(r=>r.json())
    .then(res=>{
      if(res.success){
        localStorage.setItem("user", JSON.stringify(res.user));
        location.href = "products.html";
      }else{
        alert(res.error || "Login failed");
      }
    });
}
</script>

</body>
</html>
